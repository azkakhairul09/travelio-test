{"ast":null,"code":"import _asyncToGenerator from\"D:/GitHub/Travelio Test/book-search-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"D:/GitHub/Travelio Test/book-search-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/GitHub/Travelio Test/book-search-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"D:/GitHub/Travelio Test/book-search-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"D:\\\\GitHub\\\\Travelio Test\\\\book-search-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import*as React from'react';import{Alert,CardMedia,Snackbar}from'@mui/material';import{getBooks}from'../../../function/apiGetBooks';import SearchLayout from'../../layout/searchLayout';import{styled}from'@mui/material/styles';import empty from'../../../gif/empty.gif';import BookLayout from'../../layout/bookLayout';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardList=styled('div')(function(_ref){var _ref2;var theme=_ref.theme;return _ref2={position:'relative',borderRadius:theme.shape.borderRadius,margin:theme.spacing(4),marginLeft:0,width:'100%'},_defineProperty(_ref2,theme.breakpoints.up('sm'),{marginLeft:theme.spacing(2),width:'auto'}),_defineProperty(_ref2,\"display\",'flex'),_defineProperty(_ref2,\"flexWrap\",'wrap'),_defineProperty(_ref2,\"justifyContent\",'center'),_ref2;});function BookCard(){var ref=React.useRef(null);var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),listBooks=_React$useState4[0],setListBooks=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),timer=_React$useState6[0],setTimer=_React$useState6[1];var _React$useState7=React.useState({opens:false,message:null,severity:null}),_React$useState8=_slicedToArray(_React$useState7,2),state=_React$useState8[0],setState=_React$useState8[1];var opens=state.opens,message=state.message,severity=state.severity;var handleCloses=function handleCloses(){setState(_objectSpread(_objectSpread({},state),{},{opens:false}));};function onChange(event){setValue(event.target.value);}function findBooksWithKeywords(value){if(value.length>0){getBooks(value).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!res){_context.next=5;break;}_context.next=3;return setListBooks(res);case 3:_context.next=6;break;case 5:setState({opens:true,message:\"Kami tidak menemukan buku dengan kata kunci tersebut.\",severity:\"error\"});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}()).catch(function(e){return setListBooks(null);});}}var inputChanged=function inputChanged(event){clearTimeout(timer);var newTimer=setTimeout(function(){findBooksWithKeywords(event.target.value);},600);setTimer(newTimer);};var isWishlistClicked=function isWishlistClicked(){setState(_objectSpread(_objectSpread({},state),{},{opens:false}));setTimeout(function(){setState({opens:true,message:\"Buku ini berhasil ditambahkan ke wishlist Anda.\",severity:\"success\"});},100);};var isFavoriteClicked=function isFavoriteClicked(){setState(_objectSpread(_objectSpread({},state),{},{opens:false}));setTimeout(function(){setState({opens:true,message:\"Buku ini berhasil ditambahkan menjadi buku favorit Anda.\",severity:\"success\"});},100);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Snackbar,{anchorOrigin:{vertical:'top',horizontal:'center',color:'#FFF'},open:opens,autoHideDuration:2500,onClose:handleCloses,children:/*#__PURE__*/_jsx(Alert,{onClose:handleCloses,severity:severity,sx:{width:'350px',fontSize:'12px',fontFamily:'Avenir'},children:message})}),/*#__PURE__*/_jsx(SearchLayout,{onChange:onChange,inputChanged:inputChanged,findBooksWithKeywords:findBooksWithKeywords}),/*#__PURE__*/_jsx(CardList,{children:listBooks&&listBooks.map(function(obj,i){return/*#__PURE__*/_jsx(BookLayout,{obj:obj,isWishlistClicked:isWishlistClicked,isFavoriteClicked:isFavoriteClicked,ref:ref,bookUid:obj.id},i);})}),!listBooks&&/*#__PURE__*/_jsx(CardMedia,{alt:\"empty page\",component:\"img\",src:empty,sx:{width:'600px',height:'auto',margin:'auto'}})]});}export default BookCard;","map":{"version":3,"names":["React","Alert","CardMedia","Snackbar","getBooks","SearchLayout","styled","empty","BookLayout","CardList","theme","position","borderRadius","shape","margin","spacing","marginLeft","width","breakpoints","up","BookCard","ref","useRef","useState","value","setValue","listBooks","setListBooks","timer","setTimer","opens","message","severity","state","setState","handleCloses","onChange","event","target","findBooksWithKeywords","length","then","res","catch","e","inputChanged","clearTimeout","newTimer","setTimeout","isWishlistClicked","isFavoriteClicked","vertical","horizontal","color","fontSize","fontFamily","map","obj","i","id","height"],"sources":["D:/GitHub/Travelio Test/book-search-frontend/src/modules/component/bookCard/index.js"],"sourcesContent":["import * as React from 'react';\r\nimport { Alert, CardMedia, Snackbar } from '@mui/material'\r\nimport { getBooks } from '../../../function/apiGetBooks'\r\nimport SearchLayout from '../../layout/searchLayout';\r\nimport { styled } from '@mui/material/styles';\r\nimport empty from '../../../gif/empty.gif'\r\nimport BookLayout from '../../layout/bookLayout';\r\n\r\nconst CardList = styled('div')(({ theme }) => ({\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    margin: theme.spacing(4),\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n        marginLeft: theme.spacing(2),\r\n        width: 'auto',\r\n    },\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center'\r\n}));\r\n\r\nfunction BookCard() {\r\n    const ref = React.useRef(null);\r\n    const [value, setValue] = React.useState('')\r\n    const [listBooks, setListBooks] = React.useState(null)\r\n    const [timer, setTimer] = React.useState(null)\r\n    const [state, setState] = React.useState({\r\n        opens: false,\r\n        message: null,\r\n        severity: null\r\n    });\r\n\r\n    const { opens, message, severity } = state;\r\n\r\n    const handleCloses = () => {\r\n        setState({ ...state, opens: false });\r\n    };\r\n\r\n    function onChange(event) {\r\n        setValue(event.target.value)\r\n    }\r\n\r\n    function findBooksWithKeywords(value) {\r\n        if (value.length > 0) {\r\n            getBooks(value).then(async res => {\r\n                if (res) {\r\n                    await setListBooks(res)\r\n                } else {\r\n                    setState({\r\n                        opens: true,\r\n                        message: \"Kami tidak menemukan buku dengan kata kunci tersebut.\",\r\n                        severity: \"error\"\r\n                    })\r\n                }\r\n            }).catch(e => (\r\n                setListBooks(null)\r\n            ))\r\n        }\r\n    }\r\n\r\n    const inputChanged = (event) => {\r\n        clearTimeout(timer)\r\n\r\n        const newTimer = setTimeout(() => {\r\n            findBooksWithKeywords(event.target.value)\r\n        }, 600)\r\n\r\n        setTimer(newTimer)\r\n    }\r\n\r\n    const isWishlistClicked = () => {\r\n        setState({ ...state, opens: false });\r\n        setTimeout(() => {\r\n            setState({\r\n                opens: true,\r\n                message: \"Buku ini berhasil ditambahkan ke wishlist Anda.\",\r\n                severity: \"success\"\r\n            })\r\n        }, 100);\r\n    }\r\n\r\n    const isFavoriteClicked = () => {\r\n        setState({ ...state, opens: false });\r\n        setTimeout(() => {\r\n            setState({\r\n                opens: true,\r\n                message: \"Buku ini berhasil ditambahkan menjadi buku favorit Anda.\",\r\n                severity: \"success\"\r\n            })\r\n        }, 100);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Snackbar anchorOrigin={{ vertical: 'top', horizontal: 'center', color: '#FFF' }} open={opens} autoHideDuration={2500} onClose={handleCloses}>\r\n                <Alert onClose={handleCloses} severity={severity} sx={{ width: '350px', fontSize: '12px', fontFamily: 'Avenir' }}>\r\n                    {message}\r\n                </Alert>\r\n            </Snackbar>\r\n            <SearchLayout onChange={onChange} inputChanged={inputChanged} findBooksWithKeywords={findBooksWithKeywords} />\r\n            <CardList>\r\n                {listBooks && listBooks.map((obj, i) =>\r\n                    <BookLayout key={i} obj={obj} isWishlistClicked={isWishlistClicked} isFavoriteClicked={isFavoriteClicked} ref={ref} bookUid={obj.id} />\r\n                )}\r\n            </CardList>\r\n            {!listBooks &&\r\n                <CardMedia alt=\"empty page\" component=\"img\" src={empty} sx={{\r\n                    width: '600px',\r\n                    height: 'auto',\r\n                    margin: 'auto'\r\n                }} />\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BookCard"],"mappings":"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"},"metadata":{},"sourceType":"module"}